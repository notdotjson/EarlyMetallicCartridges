<?xml version="1.0" encoding="utf-8"?>
<Patch>
	<!-- 44 sw special compat -->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_44Magnum"]/ammoTypes</xpath>
		<value>
			<Ammo_44SWSpecial_FMJ>Bullet_44SWSpecial_FMJ</Ammo_44SWSpecial_FMJ>
			<Ammo_44SWSpecial_AP>Bullet_44SWSpecial_AP</Ammo_44SWSpecial_AP>
			<Ammo_44SWSpecial_HP>Bullet_44SWSpecial_HP</Ammo_44SWSpecial_HP>
		</value>
	</Operation>
	
	<!-- 44 russian and 44 sw special compat -->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_44Magnum_HV"]/ammoTypes</xpath>
		<value>
			<Ammo_44SWSpecial_FMJ>Bullet_44SWSpecial_HV_FMJ</Ammo_44SWSpecial_FMJ>
			<Ammo_44SWSpecial_AP>Bullet_44SWSpecial_HV_AP</Ammo_44SWSpecial_AP>
			<Ammo_44SWSpecial_HP>Bullet_44SWSpecial_HV_HP</Ammo_44SWSpecial_HP>
			<Ammo_44Russian_BP>Bullet_44Russian_HV_BP</Ammo_44Russian_BP>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_44Magnum_Revolver"]/ammoTypes</xpath>
		<value>
			<Ammo_44Russian_BP>Bullet_44Russian_BP</Ammo_44Russian_BP>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAdd">
		<xpath>Defs</xpath>
		<value>
			<!-- added hv variant of 44 SW special -->
			<ThingDef ParentName="Base44SWSpecialBullet">
				<defName>Bullet_44SWSpecial_HV_FMJ</defName>
				<label>.44 S&amp;W Special bullet (FMJ)</label>
				<projectile Class="CombatExtended.ProjectilePropertiesCE">
					<damageAmountBase>16</damageAmountBase>
					<armorPenetrationSharp>4</armorPenetrationSharp>
					<armorPenetrationBlunt>18.96</armorPenetrationBlunt>
					<speed>90</speed>
				</projectile>
			</ThingDef>
			
			<ThingDef ParentName="Base44SWSpecialBullet">
				<defName>Bullet_44SWSpecial_HV_AP</defName>
				<label>.44 S&amp;W Special bullet (AP)</label>
				<projectile Class="CombatExtended.ProjectilePropertiesCE">
					<damageAmountBase>10</damageAmountBase>
					<armorPenetrationSharp>7</armorPenetrationSharp>
					<armorPenetrationBlunt>18.96</armorPenetrationBlunt>
				</projectile>
			</ThingDef>

			<ThingDef ParentName="Base44SWSpecialBullet">
				<defName>Bullet_44SWSpecial_HV_HP</defName>
				<label>.44 S&amp;W Special bullet (HP)</label>
				<projectile Class="CombatExtended.ProjectilePropertiesCE">
					<damageAmountBase>19</damageAmountBase>
					<armorPenetrationSharp>2.5</armorPenetrationSharp>
					<armorPenetrationBlunt>18.96</armorPenetrationBlunt>
				</projectile>
			</ThingDef>
			
			<!-- 44 russian -->
			<ThingDef Class="CombatExtended.AmmoDef" ParentName="44MagnumBase">
				<defName>Ammo_44Russian_BP</defName>
				<label>.44 Russian (BP)</label>
				<graphicData>
					<texPath>Things/Ammo/Pistol/BP</texPath>
					<graphicClass>Graphic_StackCount</graphicClass>
				</graphicData>
				<statBases>
					<MarketValue>0.05</MarketValue>
				</statBases>
				<tradeTags>
					<li>CE_PreIndustrialAmmo</li>
					<li>CE_AutoEnableCrafting_FueledSmithy</li>
					<li>CE_AutoEnableCrafting_ElectricSmithy</li>
				</tradeTags>
				<ammoClass>Blackpowder</ammoClass>
				<cookOffProjectile>Bullet_44Russian_BP</cookOffProjectile>
			</ThingDef>
			
			<ThingDef ParentName="Base44MagnumBullet">
				<defName>Bullet_44Russian_BP</defName>
				<label>.44 Russian bullet (BP)</label>
				<projectile Class="CombatExtended.ProjectilePropertiesCE">
					<damageAmountBase>13</damageAmountBase>
					<armorPenetrationSharp>3</armorPenetrationSharp>
					<armorPenetrationBlunt>23.280</armorPenetrationBlunt>
					<spreadMult>1.30</spreadMult>
					<speed>70</speed>
				</projectile>
			</ThingDef>
			
			<ThingDef ParentName="Base44MagnumBullet">
				<defName>Bullet_44Russian_HV_BP</defName>
				<label>.44 Russian bullet (BP)</label>
				<projectile Class="CombatExtended.ProjectilePropertiesCE">
					<damageAmountBase>16</damageAmountBase>
					<armorPenetrationSharp>3.5</armorPenetrationSharp>
					<armorPenetrationBlunt>47.04</armorPenetrationBlunt>
					<spreadMult>1.15</spreadMult>
					<speed>90</speed>
				</projectile>
			</ThingDef>
			
			<RecipeDef ParentName="BlackpowderRecipeBase">
				<defName>MakeAmmo_44Russian_BP</defName>
				<label>make .44 Russian (BP) cartridge x500</label>
				<description>Craft 500 .44 Russian (BP) cartridges.</description>
				<jobString>Making .44 Russian (BP) cartridges.</jobString>
				<ingredients>
					<li>
						<filter>
							<thingDefs>
								<li>Steel</li>
							</thingDefs>
						</filter>
						<count>24</count>
					</li>
				</ingredients>
				<fixedIngredientFilter>
					<thingDefs>
						<li>Steel</li>
					</thingDefs>
				</fixedIngredientFilter>
				<products>
					<Ammo_44Russian_BP>500</Ammo_44Russian_BP>
				</products>
				<workAmount>2400</workAmount>
			</RecipeDef>
		</value>
	</Operation>
	
	<!-- added 44 russian and 44 sw special compat to appropriate firearms -->
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/CombatExtended.GunPatcherPresetDef[defName="Revolver"]/setCaliber</xpath>
		<value>
			<setCaliber>AmmoSet_44Magnum_Revolver</setCaliber>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/CombatExtended.GunPatcherPresetDef[defName="Revolver"]/CaliberRanges/li[1]/AmmoSet</xpath>
		<value>
			<AmmoSet>AmmoSet_44Magnum_Revolver</AmmoSet>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Gun_Revolver"]/comps/li[1]/ammoSet</xpath>
		<value>
			<ammoSet>AmmoSet_44Magnum_Revolver</ammoSet>
		</value>
	</Operation>
</Patch>